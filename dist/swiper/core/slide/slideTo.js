import{animateCSSModeScroll}from"../../shared/utils.js";export default function slideTo(e=0,t=this.params.speed,n=!0,r,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const a=this;let o=e;o<0&&(o=0);const{params:s,snapGrid:l,slidesGrid:d,previousIndex:p,activeIndex:u,rtlTranslate:T,wrapperEl:f,enabled:m}=a;if(a.animating&&s.preventInteractionOnTransition||!m&&!r&&!i)return!1;const S=Math.min(a.params.slidesPerGroupSkip,o);let c=S+Math.floor((o-S)/a.params.slidesPerGroup);c>=l.length&&(c=l.length-1),(u||s.initialSlide||0)===(p||0)&&n&&a.emit("beforeSlideChangeStart");const E=-l[c];if(a.updateProgress(E),s.normalizeSlideIndex)for(let e=0;e<d.length;e+=1){const t=-Math.floor(100*E),n=Math.floor(100*d[e]),r=Math.floor(100*d[e+1]);void 0!==d[e+1]?t>=n&&t<r-(r-n)/2?o=e:t>=n&&t<r&&(o=e+1):t>=n&&(o=e)}if(a.initialized&&o!==u){if(!a.allowSlideNext&&E<a.translate&&E<a.minTranslate())return!1;if(!a.allowSlidePrev&&E>a.translate&&E>a.maxTranslate()&&(u||0)!==o)return!1}let h;if(h=o>u?"next":o<u?"prev":"reset",T&&-E===a.translate||!T&&E===a.translate)return a.updateActiveIndex(o),s.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==s.effect&&a.setTranslate(E),"reset"!==h&&(a.transitionStart(n,h),a.transitionEnd(n,h)),!1;if(s.cssMode){const e=a.isHorizontal(),n=T?E:-E;if(0===t){const t=a.virtual&&a.params.virtual.enabled;t&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{a.wrapperEl.style.scrollSnapType="",a._swiperImmediateVirtual=!1}))}else{if(!a.support.smoothScroll)return animateCSSModeScroll({swiper:a,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return a.setTransition(t),a.setTranslate(E),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,r),a.transitionStart(n,h),0===t?a.transitionEnd(n,h):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,h))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd)),!0}