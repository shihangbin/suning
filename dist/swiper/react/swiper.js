function _extends(){return _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_extends.apply(this,arguments)}import React,{useRef,useState,useEffect,forwardRef}from"react";import{getParams}from"./get-params.js";import{initSwiper,mountSwiper}from"./init-swiper.js";import{needsScrollbar,needsNavigation,needsPagination,uniqueClasses,extend}from"./utils.js";import{renderLoop,calcLoopedSlides}from"./loop.js";import{getChangedParams}from"./get-changed-params.js";import{getChildren}from"./get-children.js";import{updateSwiper}from"./update-swiper.js";import{renderVirtual,updateOnVirtualData}from"./virtual.js";import{useIsomorphicLayoutEffect}from"./use-isomorphic-layout-effect.js";const Swiper=forwardRef((({className:e,tag:r="div",wrapperTag:t="div",children:n,onSwiper:a,...s}={},c)=>{let u=!1;const[o,i]=useState("swiper"),[l,p]=useState(null),[d,f]=useState(!1),m=useRef(!1),g=useRef(null),w=useRef(null),E=useRef(null),v=useRef(null),R=useRef(null),S=useRef(null),h=useRef(null),b=useRef(null),{params:y,passedParams:j,rest:x,events:P}=getParams(s),{slides:N,slots:C}=getChildren(n),O=()=>{f(!d)};if(Object.assign(y.on,{_containerClasses(e,r){i(r)}}),!g.current&&(Object.assign(y.on,P),u=!0,w.current=initSwiper(y),w.current.loopCreate=()=>{},w.current.loopDestroy=()=>{},y.loop&&(w.current.loopedSlides=calcLoopedSlides(N,y)),w.current.virtual&&w.current.params.virtual.enabled)){w.current.virtual.slides=N;const e={cache:!1,slides:N,renderExternal:p,renderExternalUpdate:!1};extend(w.current.params.virtual,e),extend(w.current.originalParams.virtual,e)}w.current&&w.current.on("_beforeBreakpoint",O);return useEffect((()=>()=>{w.current&&w.current.off("_beforeBreakpoint",O)})),useEffect((()=>{!m.current&&w.current&&(w.current.emitSlidesClasses(),m.current=!0)})),useIsomorphicLayoutEffect((()=>{if(c&&(c.current=g.current),g.current)return mountSwiper({el:g.current,nextEl:R.current,prevEl:S.current,paginationEl:h.current,scrollbarEl:b.current,swiper:w.current},y),a&&a(w.current),()=>{w.current&&!w.current.destroyed&&w.current.destroy(!0,!1)}}),[]),useIsomorphicLayoutEffect((()=>{!u&&P&&w.current&&Object.keys(P).forEach((e=>{w.current.on(e,P[e])}));const e=getChangedParams(j,E.current,N,v.current);return E.current=j,v.current=N,e.length&&w.current&&!w.current.destroyed&&updateSwiper({swiper:w.current,slides:N,passedParams:j,changedParams:e,nextEl:R.current,prevEl:S.current,scrollbarEl:b.current,paginationEl:h.current}),()=>{P&&w.current&&Object.keys(P).forEach((e=>{w.current.off(e,P[e])}))}})),useIsomorphicLayoutEffect((()=>{updateOnVirtualData(w.current)}),[l]),React.createElement(r,_extends({ref:g,className:uniqueClasses(`${o}${e?` ${e}`:""}`)},x),C["container-start"],needsNavigation(y)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:S,className:"swiper-button-prev"}),React.createElement("div",{ref:R,className:"swiper-button-next"})),needsScrollbar(y)&&React.createElement("div",{ref:b,className:"swiper-scrollbar"}),needsPagination(y)&&React.createElement("div",{ref:h,className:"swiper-pagination"}),React.createElement(t,{className:"swiper-wrapper"},C["wrapper-start"],y.virtual?renderVirtual(w.current,N,l):!y.loop||w.current&&w.current.destroyed?N.map((e=>React.cloneElement(e,{swiper:w.current}))):renderLoop(w.current,N,y),C["wrapper-end"]),C["container-end"])}));Swiper.displayName="Swiper";export{Swiper};