import createShadow from"../../shared/create-shadow.js";import effectInit from"../../shared/effect-init.js";import effectTarget from"../../shared/effect-target.js";import effectVirtualTransitionEnd from"../../shared/effect-virtual-transition-end.js";export default function EffectCards({swiper:a,extendParams:t,on:s}){t({cardsEffect:{slideShadows:!0,transformEl:null}});effectInit({effect:"cards",swiper:a,on:s,setTranslate:()=>{const{slides:t,activeIndex:s}=a,e=a.params.cardsEffect,{startTranslate:r,isTouched:n}=a.touchEventsData,i=a.translate;for(let o=0;o<t.length;o+=1){const d=t.eq(o),f=d[0].progress,c=Math.min(Math.max(f,-4),4);let l=d[0].swiperSlideOffset;a.params.centeredSlides&&!a.params.cssMode&&a.$wrapperEl.transform(`translateX(${a.minTranslate()}px)`),a.params.centeredSlides&&a.params.cssMode&&(l-=t[0].swiperSlideOffset);let p=a.params.cssMode?-l-a.translate:-l,h=0;const m=-100*Math.abs(c);let M=1,w=-2*c,$=8-.75*Math.abs(c);const u=(o===s||o===s-1)&&c>0&&c<1&&(n||a.params.cssMode)&&i<r,x=(o===s||o===s+1)&&c<0&&c>-1&&(n||a.params.cssMode)&&i>r;if(u||x){const a=(1-Math.abs((Math.abs(c)-.5)/.5))**.5;w+=-28*c*a,M+=-.5*a,$+=96*a,h=-25*a*Math.abs(c)+"%"}if(p=c<0?`calc(${p}px + (${$*Math.abs(c)}%))`:c>0?`calc(${p}px + (-${$*Math.abs(c)}%))`:`${p}px`,!a.isHorizontal()){const a=h;h=p,p=a}const E=`\n        translate3d(${p}, ${h}, ${m}px)\n        rotateZ(${w}deg)\n        scale(${c<0?""+(1+(1-M)*c):""+(1-(1-M)*c)})\n      `;if(e.slideShadows){let a=d.find(".swiper-slide-shadow");0===a.length&&(a=createShadow(e,d)),a.length&&(a[0].style.opacity=Math.min(Math.max((Math.abs(c)-.5)/.5,0),1))}d[0].style.zIndex=-Math.abs(Math.round(f))+t.length;effectTarget(e,d).transform(E)}},setTransition:t=>{const{transformEl:s}=a.params.cardsEffect;(s?a.slides.find(s):a.slides).transition(t).find(".swiper-slide-shadow").transition(t),effectVirtualTransitionEnd({swiper:a,duration:t,transformEl:s})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!a.params.cssMode})})}